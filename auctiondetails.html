<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Adrian Auction - NFT Auction" id="og-title">
  <meta property="og:description" content="View and bid on this NFT auction on Adrian Auction" id="og-description">
  <meta property="og:image" content="https://adrianpunks.com/market/adrianpunksimages/200.png" id="og-image">
  <meta property="og:url" content="" id="og-url">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@adriancerda">
  <meta name="twitter:creator" content="@adriancerda">
  <meta name="twitter:title" content="Adrian Auction - NFT Auction" id="twitter-title">
  <meta name="twitter:description" content="Check out this NFT auction on Adrian Auction! $ADRIAN @adriancerda 游릱游린" id="twitter-description">
  <meta name="twitter:image" content="https://adrianpunks.com/market/adrianpunksimages/200.png" id="twitter-image">
  <meta name="twitter:image:alt" content="NFT auction image" id="twitter-image-alt">
  <title>Adrian Auction - Auction Details</title>
  <link rel="icon" href="favicon.ico" type="image/x-icon">
  <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.umd.min.js"></script>
  <script defer src="auction.js"></script>
  <script>
    // Script para manejar el fallback de im치genes para redes sociales
    document.addEventListener('DOMContentLoaded', function() {
      // Verificar que la imagen compartida sea v치lida, si no usar la de respaldo
      function checkImageValidity(url, fallbackUrl) {
        return new Promise((resolve) => {
          if (!url || url === 'https://placehold.co/600x600?text=NFT+Image') {
            console.log('URL no v치lida o placeholder, usando fallback inmediatamente');
            resolve(fallbackUrl);
            return;
          }
          
          const img = new Image();
          img.onload = function() {
            console.log('Imagen cargada correctamente:', url);
            resolve(url);
          };
          img.onerror = function() {
            console.log('Error al cargar la imagen:', url, 'Usando fallback:', fallbackUrl);
            resolve(fallbackUrl);
          };
          
          // Establecer un timeout por si la carga toma demasiado tiempo
          setTimeout(() => {
            console.log('Timeout al cargar la imagen:', url, 'Usando fallback:', fallbackUrl);
            resolve(fallbackUrl);
          }, 3000);
          
          img.src = url;
        });
      }
      
      // Obtener los elementos meta para las im치genes
      const ogImage = document.getElementById('og-image');
      const twitterImage = document.getElementById('twitter-image');
      
      if (ogImage && twitterImage) {
        const fallbackUrl = 'https://adrianpunks.com/market/adrianpunksimages/200.png';
        
        // Verificar las im치genes meta despu칠s de que la p치gina se haya cargado
        // (lo que significa que el JavaScript de auction.js ya ha establecido las URLs)
        setTimeout(async () => {
          const ogImageUrl = ogImage.getAttribute('content');
          const validOgImageUrl = await checkImageValidity(ogImageUrl, fallbackUrl);
          if (validOgImageUrl !== ogImageUrl) {
            console.log('Actualizando og:image a fallback');
            ogImage.setAttribute('content', validOgImageUrl);
          }
          
          const twitterImageUrl = twitterImage.getAttribute('content');
          const validTwitterImageUrl = await checkImageValidity(twitterImageUrl, fallbackUrl);
          if (validTwitterImageUrl !== twitterImageUrl) {
            console.log('Actualizando twitter:image a fallback');
            twitterImage.setAttribute('content', validTwitterImageUrl);
          }
        }, 2000); // Dar tiempo a que auction.js establezca las URLs primero
      }
    });
  </script>
  <style>
    :root {
      --bg-color: #f0f0f0;
      --primary-text: #333333;
      --accent-purple: #8a2be2;
      --accent-purple-hover: #7a1dd2;
      --accent-blue: #4dabf7;
      --card-bg: #ffffff;
      --card-border: #e9ecef;
      --card-selected-border: #8a2be2;
      --screen-bg: #ffffff;
      --navbar-height: 60px;
      --error-bg: #f8d7da;
      --error-border: #f5c6cb;
      --error-text: #721c24;
      --success-bg: #d4edda;
      --success-border: #c3e6cb;
      --success-text: #155724;
    }
    
    body {
      background-color: var(--bg-color);
      color: var(--primary-text);
      font-family: 'Share Tech Mono', monospace;
      margin: 0;
      padding: 20px;
      line-height: 1.6;
    }
    
    .container {
      max-width: 1000px;
      margin: auto;
      padding: 20px;
      background: var(--screen-bg);
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    
    header {
      text-align: center;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      position: relative;
    }
    
    header h1 {
      font-size: 2.2rem;
      margin: 0;
      color: var(--primary-text);
      font-weight: 600;
      letter-spacing: 1px;
    }
    
    header p {
      margin-top: 0.5rem;
      font-size: 1rem;
      color: var(--primary-text);
      opacity: 0.8;
    }
    
    .card {
      background: var(--card-bg);
      border: 1px solid var(--card-border);
      border-radius: 8px;
      padding: 1.5rem;
      margin-bottom: 1.5rem;
      box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .section-title {
      font-size: 1.4rem;
      margin-bottom: 1.5rem;
      color: var(--primary-text);
      font-weight: 600;
      border-bottom: 2px solid var(--card-border);
      padding-bottom: 0.5rem;
    }
    
    .auction-detail-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 2rem;
    }
    
    @media (max-width: 768px) {
      .auction-detail-grid {
        grid-template-columns: 1fr;
      }
    }
    
    .nft-image-container {
      width: 100%;
      aspect-ratio: 1/1;
      overflow: hidden;
      border-radius: 8px;
      background-color: #f0f0f0;
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: 1rem;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
    
    .nft-image {
      width: 100%;
      height: 100%;
      object-fit: contain;
      display: block;
    }
    
    .auction-info h2 {
      font-size: 1.8rem;
      margin-bottom: 1rem;
    }
    
    .auction-detail-item {
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--card-border);
    }
    
    .auction-detail-item:last-child {
      border-bottom: none;
    }
    
    .detail-label {
      font-weight: bold;
      color: #666;
      margin-bottom: 0.25rem;
    }
    
    .detail-value {
      font-size: 1.1rem;
    }
    
    .auction-status {
      display: inline-block;
      padding: 0.4rem 0.8rem;
      border-radius: 9999px;
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 1rem;
    }
    
    .status-live {
      background-color: #d1fae5;
      color: #065f46;
    }
    
    .status-ending {
      background-color: #fef3c7;
      color: #92400e;
    }
    
    .status-reserve-met {
      background-color: #dbeafe;
      color: #1e40af;
    }
    
    .btn-connect {
      background-color: var(--accent-purple);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: background-color 0.3s ease;
    }
    
    .btn-connect:hover {
      background-color: var(--accent-purple-hover);
    }
    
    .btn-action {
      background-color: var(--accent-purple);
      color: white;
      border: none;
      padding: 0.75rem 1.5rem;
      font-size: 1rem;
      border-radius: 0.5rem;
      cursor: pointer;
      transition: all 0.3s ease;
      display: inline-block;
      text-align: center;
      margin-right: 0.5rem;
      margin-bottom: 0.5rem;
    }
    
    .btn-action:hover {
      background-color: var(--accent-purple-hover);
      transform: translateY(-2px);
    }
    
    .btn-secondary {
      background-color: #6c757d;
    }
    
    .btn-secondary:hover {
      background-color: #5a6268;
    }
    
    .alert {
      padding: 1rem;
      border-radius: 0.375rem;
      margin-bottom: 1rem;
    }
    
    .alert-danger {
      background-color: var(--error-bg);
      border: 1px solid var(--error-border);
      color: var(--error-text);
    }
    
    .alert-success {
      background-color: var(--success-bg);
      border: 1px solid var(--success-border);
      color: var(--success-text);
    }
    
    .loading-spinner {
      border: 4px solid rgba(0, 0, 0, 0.1);
      border-radius: 50%;
      border-top: 4px solid var(--accent-purple);
      width: 40px;
      height: 40px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
    }
    
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    
    .share-buttons {
      display: flex;
      gap: 0.5rem;
      margin-top: 1rem;
    }
    
    .share-button {
      padding: 0.5rem;
      border-radius: 0.25rem;
      color: white;
      text-decoration: none;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 2.5rem;
      height: 2.5rem;
      transition: all 0.2s ease;
    }
    
    .share-button:hover {
      transform: translateY(-2px);
      filter: brightness(1.1);
    }
    
    .share-twitter {
      background-color: #1DA1F2;
    }
    
    .share-facebook {
      background-color: #3b5998;
    }
    
    .share-whatsapp {
      background-color: #25D366;
    }
    
    .share-telegram {
      background-color: #0088cc;
    }
    
    .footer {
      text-align: center;
      margin-top: 2rem;
      padding-top: 1rem;
      border-top: 1px solid var(--card-border);
      color: #9ca3af;
      font-size: 0.875rem;
    }
    
    .back-button {
      display: inline-flex;
      align-items: center;
      margin-bottom: 1rem;
      color: var(--accent-purple);
      text-decoration: none;
      font-weight: 500;
    }
    
    .back-button:hover {
      text-decoration: underline;
    }
    
    /* Estilos para navegaci칩n sticky */
    .sticky-nav {
      position: sticky;
      top: 0;
      z-index: 1000;
      background-color: var(--screen-bg);
      padding: 10px 0;
      margin-bottom: 0;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      transition: all 0.3s ease;
      width: 100%;
      border-bottom: 1px solid var(--card-border);
    }
    
    /* Styles for the auction ticker */
    .sticky-carousel {
      position: sticky;
      top: 42px; /* Just below the sticky menu */
      z-index: 999;
      background-color: var(--screen-bg);
      margin-top: 0;
      padding: 8px 0;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
      border-bottom: 1px solid var(--card-border);
      width: 100%;
      overflow: hidden;
    }
    
    .ticker-wrap {
      width: 100%;
      overflow: hidden;
      white-space: nowrap;
      box-sizing: border-box;
    }
    
    .ticker {
      display: inline-block;
      white-space: nowrap;
      animation: ticker-move 60s linear infinite;
    }
    
    .ticker:hover {
      animation-play-state: paused;
    }
    
    @keyframes ticker-move {
      0% { transform: translateX(100%); }
      100% { transform: translateX(-100%); }
    }
    
    .ticker-item {
      display: inline-block;
      margin-right: 20px;
    }
    
    .auction-carousel-card {
      display: flex;
      align-items: center;
      cursor: pointer;
      padding: 5px 15px;
      border-radius: 8px;
      background-color: var(--card-bg);
      box-shadow: 0 1px 3px rgba(0,0,0,0.06);
      transition: all 0.2s ease;
    }
    
    .auction-carousel-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 3px 6px rgba(0,0,0,0.1);
      background-color: #f8f9fa;
    }
    
    .carousel-img-container {
      width: 50px;
      height: 50px;
      min-width: 50px;
      border-radius: 4px;
      overflow: hidden;
      margin-right: 10px;
    }
    
    .carousel-img-container img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .carousel-info {
      display: flex;
      white-space: nowrap;
      overflow: hidden;
      align-items: center;
    }
    
    .carousel-title {
      font-weight: bold;
      overflow: hidden;
      text-overflow: ellipsis;
      font-size: 0.85rem;
      margin-right: 10px;
      max-width: 150px;
    }
    
    .carousel-price {
      color: var(--accent-purple);
      font-weight: bold;
      font-size: 0.8rem;
      margin-right: 10px;
    }
    
    .carousel-time {
      color: #666;
      font-size: 0.75rem;
    }
    
    /* Mobile adaptation */
    @media (max-width: 576px) {
      .sticky-carousel {
        top: 36px; /* Adjust for smaller menu on mobile */
      }
      
      .auction-carousel-card {
        padding: 5px 10px;
      }
      
      .carousel-img-container {
        width: 40px;
        height: 40px;
        min-width: 40px;
      }
      
      .carousel-title {
        font-size: 0.75rem;
        max-width: 100px;
      }
      
      .carousel-price {
        font-size: 0.7rem;
      }
      
      .carousel-time {
        font-size: 0.65rem;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header>
      <h1>Adrian Auction DApp</h1>
      <p>NFT Auction Details</p>
    </header>
    
    <a href="index.html" class="back-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left me-1" viewBox="0 0 16 16">
        <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"/>
      </svg>
      Back to All Auctions
    </a>
    
    <!-- Navegaci칩n sticky -->
    <ul class="nav nav-tabs mb-0 sticky-nav" id="auctionNav" role="tablist">
      <li class="nav-item" role="presentation">
        <a class="nav-link active" href="index.html">Explore Auctions</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" href="index.html#myauctions">My Auctions</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" href="index.html#mybids">My Bids</a>
      </li>
      <li class="nav-item" role="presentation">
        <a class="nav-link" href="index.html#create">Create Auction</a>
      </li>
    </ul>
    
    <!-- Ticker style carousel for active auctions -->
    <div id="auction-carousel-container" class="sticky-carousel mb-3">
      <div class="ticker-wrap">
        <div id="auction-carousel-items" class="ticker">
          <!-- Ticker items will be loaded dynamically -->
          <div class="ticker-item">
            <div class="auction-carousel-card">
              <p class="text-center">Loading auctions...</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Connect Wallet Section -->
    <div id="connect-section" class="text-center mb-4">
      <button id="connectBtn" class="btn-connect">Connect Wallet</button>
    </div>
    
    <!-- Account Info Section (hidden by default) -->
    <div id="account-section" class="text-center mb-4" style="display: none;">
      <p>Connected Wallet:</p>
      <div id="walletAddress" class="account-display"></div>
    </div>
    
    <!-- Alert Messages -->
    <div id="errorAlert" class="alert alert-danger" style="display: none;"></div>
    <div id="successAlert" class="alert alert-success" style="display: none;"></div>
    
    <!-- Loading indicator -->
    <div id="loading-auction" class="text-center py-5">
      <div class="loading-spinner"></div>
      <p class="mt-3">Loading auction details...</p>
    </div>
    
    <!-- Message shown when auction is not found -->
    <div id="no-auction-message" class="alert alert-info text-center py-5" style="display: none;">
      <h4>Auction Not Found</h4>
      <p>The auction you're looking for doesn't exist or has been removed.</p>
      
      <!-- Bot칩n para intentar reparar -->
      <div class="mt-3">
        <button id="repairButton" class="btn btn-primary mb-3">Try to Repair/Reload Auction</button>
      </div>
      
      <a href="index.html" class="btn btn-outline-primary">Browse All Auctions</a>
    </div>
    
    <!-- Auction Details -->
    <div class="container mt-4" id="auction-details-container" style="display: none;">
      <div class="auction-detail-grid">
        <div class="nft-details">
          <div class="nft-image-container">
            <img id="detail-nft-image" class="nft-image" src="https://placehold.co/600x600?text=Loading+NFT" alt="NFT Image">
          </div>
          
          <div class="card mt-4">
            <div class="section-title">Share This Auction</div>
            <div class="share-content">
              <button id="copy-link" class="btn-action mb-3 w-100">Copy Link</button>
              <div class="share-buttons">
                <a id="twitter-share" href="#" target="_blank" class="share-button share-twitter">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-twitter-x" viewBox="0 0 16 16">
                    <path d="M12.6.75h2.454l-5.36 6.142L16 15.25h-4.937l-3.867-5.07-4.425 5.07H.316l5.733-6.57L0 .75h5.063l3.495 4.633L12.601.75Zm-.86 13.028h1.36L4.323 2.145H2.865l8.875 11.633Z"/>
                  </svg>
                </a>
                <a id="facebook-share" href="#" target="_blank" class="share-button share-facebook">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-facebook" viewBox="0 0 16 16">
                    <path d="M16 8.049c0-4.446-3.582-8.05-8-8.05C3.58 0-.002 3.603-.002 8.05c0 4.017 2.926 7.347 6.75 7.951v-5.625h-2.03V8.05H6.75V6.275c0-2.017 1.195-3.131 3.022-3.131.876 0 1.791.157 1.791.157v1.98h-1.009c-.993 0-1.303.621-1.303 1.258v1.51h2.218l-.354 2.326H9.25V16c3.824-.604 6.75-3.934 6.75-7.951z"/>
                  </svg>
                </a>
                <a id="whatsapp-share" href="#" target="_blank" class="share-button share-whatsapp">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-whatsapp" viewBox="0 0 16 16">
                    <path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592zm3.615-4.934c-.197-.099-1.17-.578-1.353-.646-.182-.065-.315-.099-.445.099-.133.197-.513.646-.627.775-.114.133-.232.148-.43.05-.197-.1-.836-.308-1.592-.985-.59-.525-.985-1.175-1.103-1.372-.114-.198-.011-.304.088-.403.087-.088.197-.232.296-.346.1-.114.133-.198.198-.33.065-.134.034-.248-.015-.347-.05-.099-.445-1.076-.612-1.47-.16-.389-.323-.335-.445-.34-.114-.007-.247-.007-.38-.007a.729.729 0 0 0-.529.247c-.182.198-.691.677-.691 1.654 0 .977.71 1.916.81 2.049.098.133 1.394 2.132 3.383 2.992.47.205.84.326 1.129.418.475.152.904.129 1.246.08.38-.058 1.171-.48 1.338-.943.164-.464.164-.86.114-.943-.049-.084-.182-.133-.38-.232z"/>
                  </svg>
                </a>
                <a id="telegram-share" href="#" target="_blank" class="share-button share-telegram">
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-telegram" viewBox="0 0 16 16">
                    <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.287 5.906c-.778.324-2.334.994-4.666 2.01-.378.15-.577.298-.595.442-.03.243.275.339.69.47l.175.055c.408.133.958.288 1.243.294.26.006.549-.1.868-.32 2.179-1.471 3.304-2.214 3.374-2.23.05-.012.12-.026.166.016.047.041.042.12.037.141-.03.129-1.227 1.241-1.846 1.817-.193.18-.33.307-.358.336a8.154 8.154 0 0 1-.188.186c-.38.366-.664.64.015 1.088.327.216.589.393.85.571.284.194.568.387.936.629.093.06.183.125.27.187.331.236.63.448.997.414.214-.02.435-.22.547-.82.265-1.417.786-4.486.906-5.751a1.426 1.426 0 0 0-.013-.315.337.337 0 0 0-.114-.217.526.526 0 0 0-.31-.093c-.3.005-.763.166-2.984 1.09z"/>
                  </svg>
                </a>
              </div>
            </div>
          </div>
        </div>
        
        <div class="auction-info">
          <h2 id="detail-title">NFT Title</h2>
          <div id="detail-action-container" class="mb-4">
            <!-- Auction action buttons will be placed here -->
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label">Auction ID</div>
            <div id="detail-auction-id" class="detail-value">#0</div>
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label">Contract Address</div>
            <div id="detail-contract" class="detail-value">0x0000...0000</div>
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label">Token ID</div>
            <div id="detail-token-id" class="detail-value">0</div>
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label">Seller</div>
            <div id="detail-seller" class="detail-value">0x0000...0000</div>
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label">Reserve Price</div>
            <div id="detail-reserve-price" class="detail-value">0 ADRIAN</div>
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label">Current Bid</div>
            <div id="detail-current-bid" class="detail-value">No bids yet</div>
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label">Highest Bidder</div>
            <div id="detail-highest-bidder" class="detail-value">No bidder yet</div>
          </div>
          
          <div class="auction-detail-item">
            <div class="detail-label" id="detail-time-label">Time Remaining</div>
            <div id="detail-time-value" class="detail-value">Loading...</div>
          </div>
          
          <!-- Bot칩n de Outbid que solo aparece cuando el usuario ha sido superado -->
          <div id="outbid-notification" style="display: none;" class="alert alert-warning my-3">
            <strong>Outbid!</strong> Someone placed a higher bid than yours.
            <button id="bid-again-btn" class="btn-action mt-2 w-100">Bid Again</button>
          </div>
        </div>
      </div>

      <!-- Secci칩n para el historial de pujas -->
      <div class="card mt-4">
        <div class="section-title">Bid History</div>
        <div id="bid-history-container">
          <div id="loading-history" class="text-center p-4">
            <div class="loading-spinner"></div>
            <p class="mt-3">Loading bid history...</p>
          </div>
          <div id="bid-history-list" class="list-group"></div>
          <div id="no-bids-message" class="alert alert-info mt-3" style="display: none;">
            No bids have been placed on this auction yet.
          </div>
        </div>
      </div>
    </div>
    
    <!-- Footer -->
    <div class="footer">
      <p id="contractInfo"></p>
      <p>춸 2023 Adrian Auction - All rights reserved</p>
    </div>
  </div>
  
  <!-- Modal for Bidding -->
  <div class="modal fade" id="bidModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Place Bid</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="bid-nft-display" class="mb-3">
            <!-- NFT details populated dynamically -->
          </div>
          
          <form id="bidForm">
            <input type="hidden" id="bidAuctionId">
            <div class="mb-3">
              <label for="bidAmount" class="form-label">Bid Amount (ADRIAN)</label>
              <input type="number" class="form-control" id="bidAmount" required>
            </div>
            <div class="d-flex justify-content-between">
              <span>Minimum bid: <span id="minBid">0</span> ADRIAN</span>
              <span>Reserve price: <span id="reservePriceDisplay">0</span> ADRIAN</span>
            </div>
          </form>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
          <button type="button" class="btn-action" id="placeBidBtn">Place Bid</button>
        </div>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@alch/alchemy-web3@1.4.7/dist/alchemyWeb3.min.js"></script>
  
  <script>
    // C칩digo para obtener el ID de la subasta desde la URL
    document.addEventListener('DOMContentLoaded', async function() {
      try {
        // Verificar que tenemos ethers.js disponible
        if (typeof ethers === 'undefined') {
          console.error("Error: La librer칤a ethers.js no est치 cargada");
          document.getElementById('loading-auction').style.display = 'none';
          document.getElementById('error-message').innerHTML = "Error: Could not load ethers.js library. Please refresh the page.";
          document.getElementById('error-container').style.display = 'block';
          return;
        }
        
        console.log("Obteniendo ID de subasta desde la URL...");
        
        // Obtener ID de la URL
        const urlParams = new URLSearchParams(window.location.search);
        let auctionId = urlParams.get('id');
        
        console.log(`Par치metro ID en URL: ${auctionId}`);
        
        if (!auctionId) {
          console.error("No se especific칩 ID de subasta en la URL");
          document.getElementById('loading-auction').style.display = 'none';
          document.getElementById('no-auction-message').style.display = 'block';
          return;
        }
        
        // Validar que el ID sea un n칰mero v치lido
        if (isNaN(Number(auctionId)) || !Number.isInteger(Number(auctionId)) || Number(auctionId) <= 0) {
          console.error(`ID de subasta inv치lido: ${auctionId}`);
          document.getElementById('loading-auction').style.display = 'none';
          document.getElementById('error-message').innerHTML = `Invalid auction ID: ${auctionId}. Please use a valid positive integer.`;
          document.getElementById('error-container').style.display = 'block';
          return;
        }
        
        // Convertir a n칰mero para asegurar que no haya problemas
        auctionId = Number(auctionId);
        console.log(`ID de subasta validado: ${auctionId}`);
        
        // Cargar los detalles
        console.log("Cargando detalles de la subasta...");
        await loadAuctionDetailsPage(auctionId);
      } catch (error) {
        console.error("Error al cargar la p치gina de detalles:", error);
        document.getElementById('loading-auction').style.display = 'none';
        document.getElementById('error-message').innerHTML = `Error loading auction: ${error.message}`;
        document.getElementById('error-container').style.display = 'block';
      }
    });
  </script>

  <!-- Script para manejar el bot칩n de reparaci칩n -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      const repairButton = document.getElementById('repairButton');
      if (repairButton) {
        repairButton.addEventListener('click', async function() {
          try {
            // Mostrar loading mientras se intenta reparar
            document.getElementById('no-auction-message').style.display = 'none';
            document.getElementById('loading-auction').style.display = 'block';
            
            // Obtener ID de la URL nuevamente
            const urlParams = new URLSearchParams(window.location.search);
            const auctionId = urlParams.get('id');
            
            if (!auctionId) {
              throw new Error("No auction ID provided");
            }
            
            console.log(`Intentando reparar la subasta #${auctionId}...`);
            
            // Intentar reparar usando la funci칩n especializada
            if (typeof repairAuctionDetails === 'function') {
              await repairAuctionDetails(auctionId);
            } else {
              throw new Error("Repair function not available");
            }
          } catch (error) {
            console.error("Error during repair attempt:", error);
            document.getElementById('loading-auction').style.display = 'none';
            document.getElementById('error-message').innerHTML = `Error trying to repair: ${error.message}`;
            document.getElementById('error-container').style.display = 'block';
          }
        });
      }
    });
  </script>
</body>
</html> 